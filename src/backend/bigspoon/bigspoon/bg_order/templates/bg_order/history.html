{% extends "staff.html" %}

{% load staticfiles %}
{% load compress %}
{% load cache %}
{% block content %}
    <div class="help">
        <p><i class="icon-time"></i> <strong>History</strong> shows you all of today's acknowledged orders and requests. Here, you can review all your inactive orders and see how long it took to respond to
        the diners.</p>
    </div>

    <div class="wrapper">
    {% for meal in meal_cards %}
    <div class="item history">
        <span class="passed time"><i class="icon-time"></i> responded in {{meal.used_time.0}} mins {{meal.used_time.1}} seconds</span>
        {% cache 300 "diner" meal.diner_id %}
        <h3>{{ meal.table.name }}</h3>
        <span class='user'>
                <a class="user-profile-link" href="/staff/user/{{meal.diner.id}}"><img src="{{meal.diner.avatar_url}}" /></a>
                <h4>{{ meal.diner.get_full_name }}</h4>
        </span>
        <span class="user-summary">
        <a href="/staff/user/{{meal.diner.id}}" class='view-profile'><i class="icon-user"></i> Profile</a>
        </span>
        {% endcache %}

    </div>
    {% endfor %}
    {% for request in requests_cards %}
    <div class="item history">
        <span class="passed time"><i class="icon-time"></i> responded in {{request.used_time.0}} mins {{request.used_time.1}} seconds</span>
        <h3>{{ request.table.name }}</h3>
        <span class='user'>
                <a class="user-profile-link" href="/staff/user/{{request.diner.id}}"><img src="{{request.diner.avatar_url}}" /></a>
                <h4>{{ request.diner.get_full_name }}</h4>
        </span>

        <span class="user-summary">
        <a href="/staff/user/{{request.diner.id}}" class='view-profile'><i class="icon-user"></i> Profile</a>
        </span>
    </div>
    {% endfor %}
    </div>

{% endblock content %}
