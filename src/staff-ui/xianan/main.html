<html>
	<head>
		<meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>BigSpoon</title>
        <meta name="description" content="">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <link rel="stylesheet" href="main.css" type="text/css" />       
        <script src = "jquery-2.1.0.js"></script>        
		<script src = "handlebars-v1.3.0.js"></script>
		<script src = "masonry.js"></script>
		<script src = "main.js"></script>
						
	</head>
	
	<body>
		<nav>
	        <div class="wrapper">
	        <a class="logo" href="/staff/main/"><img src="/static/img/logo-wide-small.png"></a>
	        <ul>	            
	            <li><a class="main-nav" href=""><i class="icon-bell-alt"></i> New Orders</a></li>
	            <li><a class="main-nav" href=""><i class="icon-group"></i> Tables</a></li>
	            <li><a class="main-nav" href=""><i class="icon-time"></i> History</a></li>
	            <li><a class="main-nav" href=""><i class="icon-food"></i> Menu</a></li>
	            <li><a class="main-nav" href=""><i class="icon-bar-chart"></i> Report</a></li>
	            <li><a class="logout" href=""><i class="icon-times"></i> Logout</a></li>
	        </ul>
	        </div>
		</nav>
		<!- read in order or request and respective id->
		<div id="read-in">
			<form name = "read-in-id"  method = "post">
				User Id: <input type = "text" id = "meal_id" name = "mealId">
				<input type = "button" id = "button1"value = "Add Card" >
				Request Id:<input type = "text" id = "request_id" name = "requestId">
				<input type = "button" id = "button2"value = "Add Request" >
			</form>
		</div>
		
		<!-- div for display the cards-->
		<div id="main">
			<div class="wrapper" >
				<!-- hard coded card for displaying purpose-->
				<div class="item" id="card-150">
                    
                    <span class="urgent time countdown" start=1.404185321e+12>                   
                        <i class="icon-time"></i> waited 1452m, 39s
                    </span>
                    
                    <h3 class="user-150">A1</h3>
                    
                    <span class='user'>
                            <a class="user-profile-link" href="/staff/user/150"><img src="https://graph.facebook.com/leon.bigspoon@gmail.com/picture?type=small" /></a>
							<h4>Leon Qiao</h4>
                    </span>
                    <span class="user-summary">
                    <p class='profile-tab'>1 visits</p>
                    <p class='profile-tab'>$41.5 ave</p>
                    <a href="/staff/user/150" class='view-profile'><i class="icon-user"></i> Profile</a>
                    </span>
                   
                    <ul class="order">
                        
                              <li id="page-order-container-2657">
                                    <em class='quantity'>1x</em>
                                    <p>Magic Hats Number 9, US Not So Pale Ale</p>
                                    
                                    <em class='pos'>111</em>
                                    
                                </li>
                                                                  
                                <li id="page-order-container-2658">
                                    <em class='quantity'>1x</em>
                                    <p>Wittekerke, Belguim Wheat Ale </p>
                                    
                                    <em class='pos'>112</em>
                                    
                                </li>
                                
                                <li id="page-order-container-2659">
                                    <em class='quantity'>1x</em>
                                    <p>Brewdog Dead Pony Club, Californian Pale Ale</p>
                                    
                                    <em class='pos'>113</em>
                                    
                                </li>
                                                                   
                                <li id="page-order-container-2660">
                                    <em class='quantity'>1x</em>
                                    <p>Satan Gold, Belgium Golden Ale</p>
                                    
                                    <em class='pos'>114</em>
                                    
                                </li>
                       
                        <li class="end">
                            --- end ---
                        </li>
                    </ul>
                 <a class="acknowledge ack-button" rel="order" model="meal" id="452"><i class="icon-check-sign"></i> Acknowledge</a>
                    
                </div>
           
                <!-- the second hard coded card -->
                <div class="item" id="card-145">
                    
                    <span class="urgent time countdown" start=1.404269983e+12>                    
                        <i class="icon-time"></i> waited 41m, 37s
                    </span>
                    
                    <h3 class="user-145">02</h3>
                    
                    <span class='user'>
                            <a class="user-profile-link" href="/staff/user/145"><img src="http://www.gravatar.com/avatar/44186f0c24e53b6152bc3fb0abcd28cc?s=50&amp;d=mm" /></a>
                            <h4>Lebron James</h4>
                    </span>
                    <span class="user-summary">
                    <p class='profile-tab'>1 visits</p>
                    <p class='profile-tab'>$36.0 ave</p>
                    <a href="/staff/user/145" class='view-profile'><i class="icon-user"></i> Profile</a>
                    </span>
                 
                    <ul class="order">
                        
                               <li id="page-order-container-2661">
                                    <em class='quantity'>3x</em>
                                    <p>Pancake Testing Dish B</p>
                                    
                                    <em class='pos'>2</em>
                                    
                                </li>
                       
                        <li class="end">
                            --- end ---
                        </li>
                    </ul>
                   
                  <a class="acknowledge ack-button" rel="order" model="meal" id="453"><i class="icon-check-sign"></i> Acknowledge</a>
                    
                </div>
			</div>
		</div>
		
		<! handlebar for order template->
		<script id="card-template-order" type="text/x-handlebars-template">
			<!--based on the time, determine whether it is urgent or not, different in appearance-->					
			{{#ifCond meal_wait_time.min '>=' 3}}
				<span class = "urgent time countdown" start = {{meal_start_time}}>
			{{else}}
				<span class = "early time countdown" start= {{meal_start_time}} >
			{{/ifCond}}
			
				<i class = "icon-time"></i>waited {{meal_wait_time.min}}m, {{meal_wait_time.second}}s
				</span>
		
			<h3 calss = "user-{{dinerInfo.diner_id}}">{{meal_table_name}}</h3>
			<span class = 'user'>
				<a class="user-profile-link" href="/staff/user/{{dinerInfo.diner_id}}"><img src="{{dinerInfo.diner_avatar_rul}}" /></a>
                <h4>{{ dinerInfo.diner_name}}</h4>
			</span>
			
			<span class = "user-summary">
				<p class = 'profile-tab'>{{dinerInfo.diner_visits}}visits</p>
				<p class = 'profile-tab'>{{dinerInfo.diner_average_spend}}ave</p>
				<a href="/staff/user/{{dinerInfo.diner_id}}" class = 'view-profile'><i class="icon-user"></i>Profile</a>
			</span>
			
				<!--
				<p class="notice"><i class="icon-warning-sign"></i> Vegetarian & Muslim</p>
				-->
				
				{{#ifCond dinerInfo.diner_profile.is_vegetarian '==' 'Y'}}
					<p class="notice"><i class="icon-warning-sign"></i> Vegetarian</p>
				{{/ifCond}}
				
				{{#ifCond dinerInfo.diner_profile.is_muslim '==' 'Y'}}
					 <p class="notice"><i class="icon-warning-sign"></i> Muslim</p>
				{{/ifCond}}
				
				{{#ifCond dinerInfo.diner_profile.allergies '!==' ''}}
				<p class="notice">
					Allergic to: {{dinerInfo.diner_profile.allergies}}
				</p>
				{{/ifCond}}	
			
				<!--
				<img class="icon bill" src="img/bill.png"/>
				-->	
			
			<ul class = "order">
				
				{{#ifCond meal_note '!==' ''}}	
					<li>{{meal_note}}</li>
				{{/ifCond}}
				
				{{#each orders}}
			
					<li id="page-order-container-{{orders.order_id}}">
						<em class ='quantity'>{{dish_quantity}}x</em>
						<p> {{dish_name}} </p>
						<em class='pos'>{{dish_pos}}</em>
					</li>
					
					{{#ifCond dish_note '!==' ''}}
						<li>{{dish_note}}</li>
					{{/ifCond}}

					
				{{/each}}
				
				<li class="end">
					---end---
				</li>
				
			</ul>
			
			
			{{#ifCond meal_status "===" 0 }}
				<a class="acknowledge ack-button" rel="order" model="meal" id="{{meal_id}}"><i class="icon-check-sign"></i> Acknowledge</a>
			{{/ifCond}}
			
			{{#ifCond meal_status "===" 1 }}
				<a class="closebill ack-button" rel="bill" model="meal" id="meal-{{meal_id}}"><i class="icon-money"></i> Close Bill</a>
			{{/ifCond}}
				    			
		
		</script>
		
		<! handlebar template for request card>
		<script id="card-template-request" type="text/x-handlebars-template">
			

			{{#ifCond request_wait_time.min '>=' 1 }}
				<span class = "urgent time countdown" start = {{request_start_time}}>
			{{else}}
				<sapn class = "early time countdown" start={{request_start_time}}>
			{{/ifCond}}
			
				<i class = "icon-time"></i>waited {{request_wait_time.min}}m, {{request_wait_time.second}}s
				</span>
				
			<h3 class="user-{{meal.diner.id}}">{{request_table_name }}</h3>
			
			<span class='user'>
		    	<a class="user-profile-link" href="/staff/user/{{dinerInfo.diner_id}}"><img src="{{dinerInfo.diner_avatar_url}}" /></a>
				<h4>{{dinerInfo.diner_name}}</h4>
		    </span>
		    
		    <span class="user-summary">
            	<p class='profile-tab'>	{{dinerInfo.diner_visits}} visits</p>
                <p class='profile-tab'>${{dinerInfo.diner_average_spend}} ave</p>
                <a href="/staff/user/{{dinerInfo.diner_id}}" class='view-profile'><i class="icon-user"></i> Profile</a>
            </span>
		    		    
			{{#ifCond request.note '!==' ""}}
            <p class="note">
				{{request_note}}
            </p>
            {{/ifCond}}            			
			
			{{#ifCond request_type '==' 0}}
				<img class="icon" src="img/water.png"/>
			{{/ifCond}}
			
			{{#ifCond request_type '==' 1}}
				<img class="icon" src="img/waiter.png"/>
			{{/ifCond}}
			
			<a class="respond ack-button" rel="req" model="request" id=request-{{request_id}}><i class="icon-check-sign"></i> Acknowledge</a>
			
			
		</script>
		
		
	</body>
</html>